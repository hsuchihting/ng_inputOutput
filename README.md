# 問題需求

需求如下圖，
![process](./src/assets/img/process.jpg)

## 前情提要

- 開發環境 Angular8。
- 目前專案有一個 D3 繪圖的 component，因為有多處需要使用到這個繪圖，並且繪製一樣的審查流程圖。
- 資料有兩個陣列，一個為主節點路徑 `node`，一個為節點資訊 `info`。

## 目前需求情境

- 目前有一個需求，SA 請我做一個共用元件去處理資料後，再把資料傳給 D3 這個元件。
- 節點的顏色顯示不同的狀態。(這部分已經定義好)
- `node` 陣列是顯示審核流程的節點，也就是圓圈。
- `info` 陣列是灰色文字，格式我已經處理好了，也有成功放在 D3 與呈現。
- 因流程可能會有還沒審核狀態，所以會出現灰色圓圈，並且沒有任何資訊，這部分的物件會如下呈現，也就是除了節點 `now_node` 會與 `node` 陣列的 `node` 是一樣的以外，其餘皆為空字串。

**info**

```javascript
  {
    now_node: 'T06',
    node_action: '',
    action_date: '',
    memo: '',
    userName: '',
  },
```

## 問題一

1. 目前我已經重新把 `node` 與 `info` 的資料整理成新的物件內容，並且放到新的陣列當中，其全域變數是要傳給 D3 用的變數，所以將陣列結果賦予到這兩個變數中。
2. 但因為目前 `info` 的資訊會是變動的，希望把節點的欄位新增到 info 陣列裡面。不然跑 D3 的時候會是 undefined。其中的原因就是節點資訊還沒有傳給 D3，結果 D3 就先畫圖了，然後因為找不到 node 的這個物件屬性，所以一直噴錯。
3. info 無法呈現與 node 相同的節點。

## 問題二

1. 使用測試資料的狀態可以正確讓 D3 繪圖，但當我改變資料長度時，D3 圖案就會無法正確顯示節點資訊，這部分應該是我哪裡寫錯，但我還在找原因為什麼改變陣列長度後就會噴錯。
